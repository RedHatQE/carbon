# $ carbon run --scenario examples/provision/beaker/beaker.yaml
---
name: Beaker example
description: Get a machine from Beaker

credentials:

  - name: beaker
    keytab: group_keytab
    keytab_principal: myprincipal
    username:
    password:

provision:

  - name: Machine from Beaker
    provider: beaker
    credential: beaker
    role: bkr-machine
    # required keys - arch and variant
    bkr_arch: x86_64
    bkr_variant: Server
    
    # inject ssh key to the Beaker machine, saved in assets folder
    # if bkr_ssh_key is set, bkr_username and bkr_password must also be set
    bkr_ssh_key: <my_private_ssh_key>
    bkr_username: <bkr_machine_username>
    bkr_password: <bkr_machine_password>

    # either distro or family needs to be set
    bkr_family: RedHatEnterpriseLinux7
    #bkr_distro: RHEL-7.3

    # the rest are optional values, it is good idea to have a whiteboard value set
    # also a really good idea to have your jobgroup set, if using a keytab
    bkr_whiteboard: Beaker, machine provisioning from Carbon
#    bkr_jobgroup: <my bkr group>

    # bkr_tag cannot be set in conjuction w/bkr_distro, should be set w/bkr_family
    #bkr_tag: "RTT_ACCEPTED"
    bkr_host_requires_options: ["memory>=1000", "hostname=rowlf.dqe.lab.eng.bos.redhat.com"]
    bkr_distro_requires_options: ["method=nfs", "tag=RTT_ACCEPTED"]

    # Virt options
    bkr_virtual_machine: False
    bkr_virt_capable: True

    # possible values for priority: Low, Medium, Normal, High, Urgent"
    bkr_priority: Urgent
    bkr_retention_tag: 60days

    # timeout for the beaker job, default if not set is 8hrs = 28800
    # can only set values between 1hr(3600) and 48hrs(172800)
    bkr_timeout: 172800

    # kernel options
    #
    # bkr_kernel_options: ["selinux=--permisssive", "keyboard=us", "lang=us", "timezone=est"]
    # bkr_kernel_post_options: ["isolcpus=0,5"]

