---
# default carbon schema

type: map
allowempty: True
mapping:
  name:
    required: True
    type: str
  description:
    required: True
    type: str
  dep_check:
    type: seq
    sequence:
      - type: str
  credentials:
    type: seq
    sequence:
      - type: any

  provision:
    required: True
    sequence:
      - type: map
        allowempty: True
        mapping:
          name:
            required: True
            type: str
          description:
            type: str
          role:
            required: True
            type: str

  orchestrate:
    sequence:
      - type: map
        allowempty: True
        mapping:
          name:
            required: True
            type: str
          description:
            type: str
          orchestrator:
            type: str
            func: valid_orchestrator
          hosts:
            required: True
            type: any
            func: type_str_list
          ansible_script:
            type: bool
          ansible_options:
            allowempty: True
            type: map
          ansible_galaxy_options:
            allowempty: True
            type: map

  execute:
    sequence:
      - type: map
        allowempty: True
        func: valid_execute_types
        mapping:
          name:
            required: True
            type: str
          description:
            type: str
          executor:
            required: True
            type: str
          hosts:
            required: True
            type: any
            func: type_str_list
          git:
            allowempty: True
            type: seq
            sequence:
              - type: map
                mapping:
                  repo:
                    required: True
                    type: str
                  version:
                    required: True
                    type: str
                  dest:
                    required: True
                    type: str
          shell:
            allowempty: True
            type: seq
            sequence:
              - type: map
                mapping:
                  chdir:
                    type: str
                  ignore_rc:
                    type: bool
                  command:
                    required: True
                    type: str
          script:
            allowempty: True
            type: seq
            sequence:
              - type: map
                mapping:
                  chdir:
                    type: str
                  ignore_rc:
                    type: bool
                  name:
                    required: True
                    type: str
          playbook:
            allowempty: True
            type: seq
            sequence:
              - type: map
                mapping:
                  chdir:
                    type: str
                  ignore_rc:
                    type: bool
                  name:
                    required: True
                    type: str
          artifacts:
            type: any
            func: type_str_list
          ignore_rc:
            type: bool

  report:
