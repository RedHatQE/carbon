---
scenario: Scenario Example
description: Description of the scenario example.

credentials:

  - provision: openstack
    url: http://qeos.lab.eng.rdu2.redhat.com
    site: qeos
    project: project
    user: username
    password: password

provision:

  - name: machine_1
    provider: openstack
    arch: x86_64
    image: rhel-6.9-workstation-x86_64-latest
    variant: Workstation
    flavor: medium
    ip_addr:
    role: w_client

  - name: machine_2
    provider: beaker
    arch: i386
    tag: ['RTT_ACCEPTED']
    family: RedHatEnterpriseLinux6
    variant: Workstation
    info: client
    ip_addr:
    role: w_client

  - name: machine_3
    provider: beaker
    arch: s390x
    tag: ['RTT_ACCEPTED']
    family: RedHatEnterpriseLinux6
    variant: Server
    info: client
    ip_addr:
    role: s390x_client

  - name: machine_4
    provider: openstack
    arch: x86_64
    variant: Server
    flavor: medium
    ip_addr:
    role: test_pilot

orchestrate:

  - name: rhn
    hosts: machine_1, machine_2
    vars:
      host: subscription.rhsm.stage.redhat.com
      username: pit_rhel_workstation_1
      password: EwEBUVYX
      auto-attach: True
      clean: False

  - name: rhn
    hosts: machine_3
    vars:
      host: subscription.rhsm.stage.redhat.com
      username: pit_rhel_server_1
      password: EwEBUAAA
      auto-attach: True
      clean: False
      channels: ['rhel-6-for-system-z-rpms', 'rhel-6-for-system-z-optional-rpms']

  - name: install_packages
    hosts: machine_1, machine_2, machine_3
    vars:
      packages: pexpect, git, wget, python-setuptools, python-devel, restraint-deamon
      group_packages: desktop

execute:

  - framework: restraint
    vars:
      execute_xml: http://file.bos.redhat.com/~vipatel/FFinterop-rhel6.xml
      role: ['w_client', 's390x_client']

report:

  - type: python
    name: ftp
    vars:
      address: ftp.redhat.com

  - type: playbook
    name: irc
    vars:
      channels: #pit

  - type: notification
    name: email
    vars:
      emails: tmv@redhat.com, vipatel@redhat.com

  - type: test
    name: polarion
    vars:
      host:
      username:
      password:
